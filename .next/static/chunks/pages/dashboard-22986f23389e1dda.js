(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{13194:(e,s,r)=>{"use strict";r.d(s,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>l});var a=r(37876),t=r(14232),i=r(90491),n=r(27025);let l=i.bL,d=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(i.B8,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...t})});d.displayName=i.B8.displayName;let c=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(i.l9,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...t})});c.displayName=i.l9.displayName;let o=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(i.UC,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...t})});o.displayName=i.UC.displayName},20564:(e,s,r)=>{"use strict";r.d(s,{A:()=>d});var a=r(37876),t=r(48230),i=r.n(t),n=r(89099);let l=[{href:"/dashboard",label:"Dashboard"},{href:"/adupload",label:"Ad Upload"},{href:"/analytics",label:"Analytics"},{href:"/wallet",label:"Wallet"},{href:"/settings",label:"Settings"}];function d(e){let{children:s}=e,r=(0,n.useRouter)();return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("nav",{className:"bg-white shadow-md border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex justify-between h-16",children:(0,a.jsx)("div",{className:"flex space-x-8",children:l.map(e=>{let s=r.pathname===e.href;return(0,a.jsx)(i(),{href:e.href,className:"\n                      inline-flex items-center px-1 pt-1 text-sm font-medium transition-all duration-200 ease-in-out\n                      border-b-2 hover:border-green-500 focus:outline-none focus:border-green-500\n                      ".concat(s?"border-green-600 text-green-700":"border-transparent text-gray-700 hover:text-green-600 hover:underline","\n                    "),children:e.label},e.href)})})})})}),(0,a.jsx)("main",{className:"p-8",children:s})]})}},27025:(e,s,r)=>{"use strict";r.d(s,{cn:()=>i});var a=r(69241),t=r(29573);function i(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,t.QP)((0,a.$)(s))}},31188:(e,s,r)=>{"use strict";r.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>l});var a=r(37876),t=r(14232),i=r(27025);let n=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...t})});n.displayName="Card";let l=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...t})});l.displayName="CardHeader";let d=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...t})});d.displayName="CardTitle";let c=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",r),...t})});c.displayName="CardDescription";let o=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",r),...t})});o.displayName="CardContent",t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",r),...t})}).displayName="CardFooter"},39543:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>_});var a=r(37876),t=r(14232),i=r(44190),n=r(20564),l=r(31188),d=r(13194),c=r(42298),o=r(76423),x=r(34007),m=r(31462),h=r(4069),u=r(40570),f=r(25493),j=r(67362),p=r(46976),v=r(99306),g=r(33947),b=r(88246),N=r(45907),y=r(91159),w=r(54955),k=r(42320),A=r(26400),R=r(23551),C=r(54893),D=r(41180),S=r(9498),Z=r(46293),E=r(30860),I=r(16322),W=r(45798),M=r(21918),B=r(16075),F=r(52126),L=r(97685);function _(){let[e,s]=(0,t.useState)(null),[r,_]=(0,t.useState)(null),[U,O]=(0,t.useState)(!0),[T,P]=(0,t.useState)(!1),K=async()=>{try{P(!0);let{data:{user:e}}=await i.N.auth.getUser();if(!e)throw Error("Not authenticated");let{data:r}=await i.N.from("profiles").select("role").eq("id",e.id).single();_((null==r?void 0:r.role)||"advertiser");let a={partner:{campaigns:45,impressions:125e3,clicks:4500,ctr:3.6,revenue:8750,activeDrivers:230},advertiser:{adSpend:5200,impressions:89e3,clicks:3200,ctr:3.6,conversions:145,roi:2.3,activeCampaigns:8},driver:{earnings:1250,walletBalance:780,adViews:145,tripsToday:12,hoursOnline:7.5,avgEarningsPerTrip:104},charts:{performanceData:Array.from({length:30},(e,s)=>({date:(0,F.GP)(new Date(Date.now()-(29-s)*864e5),"MMM dd"),impressions:Math.floor(5e3*Math.random())+2e3,clicks:Math.floor(200*Math.random())+50,revenue:Math.floor(500*Math.random())+100,spend:Math.floor(300*Math.random())+80})),regionData:[{region:"Nairobi",value:45,fill:"#0088FE"},{region:"Mombasa",value:25,fill:"#00C49F"},{region:"Kisumu",value:15,fill:"#FFBB28"},{region:"Nakuru",value:10,fill:"#FF8042"},{region:"Other",value:5,fill:"#8884D8"}],timeData:Array.from({length:24},(e,s)=>({hour:"".concat(s,":00"),activity:Math.floor(100*Math.random())+20}))}};s(a)}catch(e){console.error("Error fetching dashboard data:",e),L.oR.error("Failed to load dashboard data")}finally{O(!1),P(!1)}};(0,t.useEffect)(()=>{K();let e=setInterval(K,1e4);return()=>clearInterval(e)},[]);let V=async()=>{(0,L.oR)("PDF export feature coming soon",{icon:"\uD83D\uDCC4"})};return U?(0,a.jsx)(n.A,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(R.A,{className:"h-8 w-8 animate-spin mx-auto mb-2"}),(0,a.jsx)("p",{children:"Loading dashboard..."})]})})}):e?(0,a.jsx)(n.A,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["partner"===r&&"Partner Dashboard","advertiser"===r&&"Advertiser Dashboard","driver"===r&&"Driver Dashboard"]}),(0,a.jsx)("p",{className:"text-gray-500",children:"Real-time analytics and performance metrics"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.$,{onClick:K,variant:"outline",disabled:T,children:(0,a.jsx)(R.A,{className:"h-4 w-4 ".concat(T?"animate-spin":"")})}),(0,a.jsxs)(c.$,{onClick:()=>{if(!e)return;let s=e.charts.performanceData.map(e=>"".concat(e.date,",").concat(e.impressions,",").concat(e.clicks,",").concat(e.revenue,",").concat(e.spend)).join("\n"),r=new Blob(["Date,Impressions,Clicks,Revenue,Spend\n".concat(s)],{type:"text/csv"}),a=window.URL.createObjectURL(r),t=document.createElement("a");t.href=a,t.download="adgo-analytics-".concat((0,F.GP)(new Date,"yyyy-MM-dd"),".csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(a),L.oR.success("CSV exported successfully")},variant:"outline",children:[(0,a.jsx)(M.A,{className:"h-4 w-4 mr-2"}),"CSV"]}),(0,a.jsxs)(c.$,{onClick:V,variant:"outline",children:[(0,a.jsx)(B.A,{className:"h-4 w-4 mr-2"}),"PDF"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{children:"Live data â€¢ Auto-refreshes every 10 seconds"}),(0,a.jsxs)(o.E,{variant:"outline",className:"text-xs",children:["Last updated: ",(0,F.GP)(new Date,"HH:mm:ss")]})]}),(0,a.jsxs)(d.tU,{value:r||"advertiser",onValueChange:e=>_(e),children:[(0,a.jsxs)(d.j7,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(d.Xi,{value:"partner",children:"Partner"}),(0,a.jsx)(d.Xi,{value:"advertiser",children:"Advertiser"}),(0,a.jsx)(d.Xi,{value:"driver",children:"Driver"})]}),(0,a.jsx)(d.av,{value:"partner",children:(0,a.jsx)(()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)(l.Zp,{children:(0,a.jsxs)(l.Wu,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["$",e.partner.revenue.toLocaleString()]})]}),(0,a.jsx)(C.A,{className:"h-8 w-8 text-green-500"})]}),(0,a.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:[(0,a.jsx)(D.A,{className:"inline h-3 w-3"})," +12% from last month"]})]})}),(0,a.jsx)(l.Zp,{children:(0,a.jsxs)(l.Wu,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Active Campaigns"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.partner.campaigns})]}),(0,a.jsx)(S.A,{className:"h-8 w-8 text-blue-500"})]}),(0,a.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:[(0,a.jsx)(D.A,{className:"inline h-3 w-3"})," +5 new this week"]})]})}),(0,a.jsx)(l.Zp,{children:(0,a.jsxs)(l.Wu,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Active Drivers"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.partner.activeDrivers})]}),(0,a.jsx)(Z.A,{className:"h-8 w-8 text-purple-500"})]}),(0,a.jsxs)("p",{className:"text-xs text-purple-600 mt-1",children:["CTR: ",e.partner.ctr,"%"]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Revenue Trend"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)(x.u,{width:"100%",height:300,children:(0,a.jsxs)(m.Q,{data:e.charts.performanceData,children:[(0,a.jsx)(h.d,{strokeDasharray:"3 3"}),(0,a.jsx)(u.W,{dataKey:"date"}),(0,a.jsx)(f.h,{}),(0,a.jsx)(j.m,{}),(0,a.jsx)(p.G,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6})]})})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Regional Distribution"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)(x.u,{width:"100%",height:300,children:(0,a.jsxs)(v.r,{children:[(0,a.jsx)(g.F,{data:e.charts.regionData,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{region:s,value:r}=e;return"".concat(s,": ").concat(r,"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:e.charts.regionData.map((e,s)=>(0,a.jsx)(b.f,{fill:e.fill},"cell-".concat(s)))}),(0,a.jsx)(j.m,{})]})})})]})]})]}),{})}),(0,a.jsx)(d.av,{value:"advertiser",children:(0,a.jsx)(()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Ad Spend"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["$",e.advertiser.adSpend.toLocaleString()]})]}),(0,a.jsx)(C.A,{className:"h-8 w-8 text-red-500"})]})})}),(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Impressions"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.advertiser.impressions.toLocaleString()})]}),(0,a.jsx)(E.A,{className:"h-8 w-8 text-blue-500"})]})})}),(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Clicks"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.advertiser.clicks.toLocaleString()})]}),(0,a.jsx)(I.A,{className:"h-8 w-8 text-green-500"})]})})}),(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"ROI"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[e.advertiser.roi,"x"]})]}),(0,a.jsx)(D.A,{className:"h-8 w-8 text-purple-500"})]})})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Campaign Performance"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)(x.u,{width:"100%",height:400,children:(0,a.jsxs)(N.b,{data:e.charts.performanceData,children:[(0,a.jsx)(h.d,{strokeDasharray:"3 3"}),(0,a.jsx)(u.W,{dataKey:"date"}),(0,a.jsx)(f.h,{}),(0,a.jsx)(j.m,{}),(0,a.jsx)(y.s,{}),(0,a.jsx)(w.N,{type:"monotone",dataKey:"impressions",stroke:"#8884d8",name:"Impressions"}),(0,a.jsx)(w.N,{type:"monotone",dataKey:"clicks",stroke:"#82ca9d",name:"Clicks"})]})})})]})]}),{})}),(0,a.jsx)(d.av,{value:"driver",children:(0,a.jsx)(()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Today's Earnings"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["KES ",e.driver.earnings.toLocaleString()]})]}),(0,a.jsx)(C.A,{className:"h-8 w-8 text-green-500"})]})})}),(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Wallet Balance"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["KES ",e.driver.walletBalance.toLocaleString()]})]}),(0,a.jsx)(W.A,{className:"h-8 w-8 text-blue-500"})]})})}),(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Ad Views Today"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.driver.adViews})]}),(0,a.jsx)(E.A,{className:"h-8 w-8 text-purple-500"})]})})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Daily Activity"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)(x.u,{width:"100%",height:300,children:(0,a.jsxs)(k.E,{data:e.charts.timeData,children:[(0,a.jsx)(h.d,{strokeDasharray:"3 3"}),(0,a.jsx)(u.W,{dataKey:"hour"}),(0,a.jsx)(f.h,{}),(0,a.jsx)(j.m,{}),(0,a.jsx)(A.y,{dataKey:"activity",fill:"#8884d8"})]})})})]})]}),{})})]})]})}):(0,a.jsx)(n.A,{children:(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-red-500",children:"Failed to load dashboard data"})})})}},42298:(e,s,r)=>{"use strict";r.d(s,{$:()=>c});var a=r(37876),t=r(14232),i=r(82987),n=r(47137),l=r(27025);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=t.forwardRef((e,s)=>{let{className:r,variant:t,size:n,asChild:c=!1,...o}=e,x=c?i.DX:"button";return(0,a.jsx)(x,{className:(0,l.cn)(d({variant:t,size:n,className:r})),ref:s,...o})});c.displayName="Button"},44190:(e,s,r)=>{"use strict";r.d(s,{N:()=>i});var a=r(46958),t=r(65364);let i=(0,a.UU)("https://rkonwkggxaohpmxmzmfn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJrb253a2dneGFvaHBteG16bWZuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0OTk0MDQsImV4cCI6MjA3MzA3NTQwNH0.F8dsonOXlKqViCP-Jz5CpxS4ObXIbWoTHGLB3udjRqo");(0,a.UU)("https://rkonwkggxaohpmxmzmfn.supabase.co",t.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{persistSession:!1}})},67580:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return r(39543)}])},76423:(e,s,r)=>{"use strict";r.d(s,{E:()=>l});var a=r(37876);r(14232);var t=r(47137),i=r(27025);let n=(0,t.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:r,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)(n({variant:r}),s),...t})}}},e=>{e.O(0,[987,8,853,582,880,172,636,593,792],()=>e(e.s=67580)),_N_E=e.O()}]);