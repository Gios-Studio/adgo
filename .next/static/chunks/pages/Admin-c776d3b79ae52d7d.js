(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[757],{37072:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Admin",function(){return t(78954)}])},78954:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var l=t(37876),a=t(14232),r=t(4613);function c(){let[e,s]=(0,a.useState)([]),[t,c]=(0,a.useState)([]),[n,d]=(0,a.useState)(null),[i,h]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{var e,t;let l=await r.N.rpc("rpc_admin_users"),a=await r.N.rpc("rpc_admin_payments");l.error&&d(l.error.message),a.error&&d(a.error.message),s(null!=(e=l.data)?e:[]),c(null!=(t=a.data)?t:[]),h(!1)})()},[]),i)?(0,l.jsx)("div",{className:"p-6",children:"Loading admin…"}):n?(0,l.jsx)("div",{className:"p-6 text-red-600",children:n}):(0,l.jsxs)("div",{className:"p-6 space-y-10",children:[(0,l.jsxs)("section",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Users"}),(0,l.jsxs)("table",{className:"w-full border",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"p-2 text-left",children:"Email"}),(0,l.jsx)("th",{className:"p-2 text-left",children:"Name"}),(0,l.jsx)("th",{className:"p-2 text-left",children:"Role"}),(0,l.jsx)("th",{className:"p-2 text-right",children:"KES Balance"})]})}),(0,l.jsx)("tbody",{children:e.map(e=>{var s,t;return(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"p-2",children:e.email}),(0,l.jsx)("td",{className:"p-2",children:null!=(s=e.full_name)?s:"—"}),(0,l.jsx)("td",{className:"p-2",children:e.role}),(0,l.jsx)("td",{className:"p-2 text-right",children:((null!=(t=e.balance_cents)?t:0)/100).toLocaleString()})]},e.user_id)})})]})]}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Recent Payment Intents"}),(0,l.jsx)("div",{className:"overflow-auto",children:(0,l.jsxs)("table",{className:"min-w-[900px] border",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"p-2 text-left",children:"Intent"}),(0,l.jsx)("th",{className:"p-2 text-left",children:"Provider"}),(0,l.jsx)("th",{className:"p-2 text-left",children:"Status"}),(0,l.jsx)("th",{className:"p-2 text-right",children:"Amount (KES)"}),(0,l.jsx)("th",{className:"p-2 text-left",children:"Phone"}),(0,l.jsx)("th",{className:"p-2 text-left",children:"Receipt"}),(0,l.jsx)("th",{className:"p-2 text-left",children:"Error"}),(0,l.jsx)("th",{className:"p-2 text-left",children:"At"})]})}),(0,l.jsx)("tbody",{children:null==t?void 0:t.slice(0,50).map(e=>{var s,t,a;return(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"p-2",children:e.id}),(0,l.jsx)("td",{className:"p-2",children:e.provider}),(0,l.jsx)("td",{className:"p-2",children:e.status}),(0,l.jsx)("td",{className:"p-2 text-right",children:((null!=(s=e.amount_cents)?s:0)/100).toLocaleString()}),(0,l.jsx)("td",{className:"p-2",children:null!=(t=e.phone_e164)?t:"—"}),(0,l.jsx)("td",{className:"p-2",children:null!=(a=e.external_txn_id)?a:"—"}),(0,l.jsx)("td",{className:"p-2",children:e.error_code?"".concat(e.error_code,": ").concat(e.error_message):"—"}),(0,l.jsx)("td",{className:"p-2",children:new Date(e.created_at).toLocaleString()})]},e.id)})})]})})]})]})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=37072)),_N_E=e.O()}]);